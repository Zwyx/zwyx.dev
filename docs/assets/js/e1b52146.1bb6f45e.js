"use strict";(self.webpackChunkzwyx_dev=self.webpackChunkzwyx_dev||[]).push([[1019],{7416:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>f,frontMatter:()=>a,metadata:()=>r,toc:()=>o});var r=n(7098),s=n(4848),i=n(8453);const a={tags:["json","stringify"]},c=void 0,l={authorsImageUrls:[]},o=[];function u(e){const t={a:"a",code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Not really a TIL, but more a knack: stringify an object containing circular references:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'const safeStringify = (obj, indent = 2) => {\n\tlet cache = [];\n\tconst retVal = JSON.stringify(\n\t\tobj,\n\t\t(key, value) =>\n\t\t\ttypeof value === "object" && value !== null\n\t\t\t\t? cache.includes(value)\n\t\t\t\t\t? undefined // Duplicate reference found, discard key\n\t\t\t\t\t: cache.push(value) && value // Store value in our collection\n\t\t\t\t: value,\n\t\tindent,\n\t);\n\tcache = null;\n\treturn retVal;\n};\n'})}),"\n",(0,s.jsx)(t.p,{children:"Use like:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"console.log(safeStringify(event));\n"})}),"\n",(0,s.jsxs)(t.p,{children:["From ",(0,s.jsx)(t.a,{href:"https://stackoverflow.com/questions/11616630/how-can-i-print-a-circular-structure-in-a-json-like-format",children:"here"}),"."]})]})}function f(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>c});var r=n(6540);const s={},i=r.createContext(s);function a(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:t},e.children)}},7098:e=>{e.exports=JSON.parse('{"permalink":"/til/2022/12/05/JSON stringify circular references","editUrl":"https://github.com/zwyx/zwyx.dev/tree/master/til/2022-12-05-JSON stringify circular references.md","source":"@site/til/2022-12-05-JSON stringify circular references.md","title":"JSON stringify circular references","description":"Not really a TIL, but more a knack","date":"2022-12-05T00:00:00.000Z","tags":[{"inline":true,"label":"json","permalink":"/til/tags/json"},{"inline":true,"label":"stringify","permalink":"/til/tags/stringify"}],"hasTruncateMarker":false,"authors":[],"frontMatter":{"tags":["json","stringify"]},"unlisted":false,"prevItem":{"title":"rsync and file renames","permalink":"/til/2022/12/19/rsync and file renames"},"nextItem":{"title":"wget for FTP","permalink":"/til/2022/11/23/wget for FTP"}}')}}]);