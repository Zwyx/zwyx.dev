"use strict";(self.webpackChunkzwyx_dev=self.webpackChunkzwyx_dev||[]).push([[2262],{6980:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>i,contentTitle:()=>c,default:()=>m,durationData:()=>l,frontMatter:()=>s,longestDuration:()=>d,metadata:()=>o,toc:()=>u});var o=t(8819),r=t(4848),a=t(8453);const s={title:"Custom clone function in JavaScript",tags:["javascript","clone","bun","node"]},c=void 0,i={authorsImageUrls:[]},l=[{title:"getPlayersColumnsClone",duration:.06},{title:"structuredClone",duration:2.54},{title:"Lodash.cloneDeep",duration:4.68},{title:"Ramda.clone",duration:8.62}],d=Math.max(...l.map((({duration:n})=>n))),u=[];function p(n){const e={a:"a",code:"code",p:"p",pre:"pre",...(0,a.R)(),...n.components},{Details:t}=e;return t||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.p,{children:["We can easily clone an object in JavaScript using the ",(0,r.jsx)(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/structuredClone",children:(0,r.jsx)(e.code,{children:"structuredClone"})})," method, Ramda's ",(0,r.jsx)(e.a,{href:"https://ramdajs.com/docs/#clone",children:(0,r.jsx)(e.code,{children:"clone"})}),", or Lodash's ",(0,r.jsx)(e.a,{href:"https://lodash.com/docs/4.17.15#cloneDeep",children:(0,r.jsx)(e.code,{children:"cloneDeep"})}),"."]}),"\n",(0,r.jsx)(e.p,{children:"However, writing our own cloning function can lead to much better performances."}),"\n",(0,r.jsxs)(e.p,{children:["For the Codewars kata ",(0,r.jsx)(e.a,{href:"https://www.codewars.com/kata/688b957a12698cb53d5959fe",children:"Win at Skyjo"}),", the function ",(0,r.jsx)(e.a,{href:"https://github.com/Zwyx/codewars-skyjo-resources/blob/df3cdcc47cf16b8904bd5f3fae015f25bc298cb0/src/utils.ts#L59",children:(0,r.jsx)(e.code,{children:"getPlayersColumnsClone"})})," deep clones an array of five arrays, themselves arrays of four arrays, themselves arrays of three arrays of simple objects with four properties."]}),"\n",(0,r.jsx)(e.p,{children:"Here's how this function performs 100,000 cloning operations compare to other methods:"}),"\n","\n","\n",l.map((({title:n,duration:e})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("code",{children:n})," ",e," s",(0,r.jsx)("div",{style:{marginTop:"2px",marginBottom:"12px",display:"flex",alignItems:"center"},children:(0,r.jsx)("span",{style:{display:"inline-block",width:100*e/d+"%",height:"8px",backgroundColor:"var(--ifm-link-color)",borderRadius:"5px"}})})]}))),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Benchmark implementation"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:'import Lodash from "lodash";\nimport * as Ramda from "ramda";\n\nconst NUMBER_OF_PLAYERS = 5;\nconst NUMBER_OF_COLUMNS = 4;\nconst NUMBER_OF_ROWS = 3;\n\nconst playersColumns = Array.from({ length: NUMBER_OF_PLAYERS }, () =>\n\tArray.from({ length: NUMBER_OF_COLUMNS }, (_, x) =>\n\t\tArray.from({ length: NUMBER_OF_ROWS }, (__, y) => ({\n\t\t\tx,\n\t\t\ty,\n\t\t\tcard: 0,\n\t\t\tvisible: false,\n\t\t})),\n\t),\n);\n\nconst cloneFunctions = [\n\tRamda.clone,\n\tLodash.cloneDeep,\n\tstructuredClone,\n\tgetPlayersColumnsClone,\n];\n\nfor (const cloneFunction of cloneFunctions) {\n\tconsole.info(`Cloning with \'${cloneFunction.name}\'...`);\n\n\tconst startTime = performance.now();\n\n\tfor (let i = 0; i < 100_000; i++) {\n\t\tcloneFunction(playersColumns);\n\t}\n\n\tconst duration = Math.round((performance.now() - startTime) / 10) / 100;\n\n\tconsole.info(`Took ${duration} s`);\n}\n'})})]})]})}function m(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(p,{...n})}):p(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>c});var o=t(6540);const r={},a=o.createContext(r);function s(n){const e=o.useContext(a);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),o.createElement(a.Provider,{value:e},n.children)}},8819:n=>{n.exports=JSON.parse('{"permalink":"/til/2025/08/01/Custom clone function in JavaScript","editUrl":"https://github.com/zwyx/zwyx.dev/tree/master/til/2025-08-01-Custom clone function in JavaScript.mdx","source":"@site/til/2025-08-01-Custom clone function in JavaScript.mdx","title":"Custom clone function in JavaScript","description":"We can easily clone an object in JavaScript using the structuredClone method, Ramda\'s clone, or Lodash\'s cloneDeep.","date":"2025-08-01T00:00:00.000Z","tags":[{"inline":true,"label":"javascript","permalink":"/til/tags/javascript"},{"inline":true,"label":"clone","permalink":"/til/tags/clone"},{"inline":true,"label":"bun","permalink":"/til/tags/bun"},{"inline":true,"label":"node","permalink":"/til/tags/node"}],"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"Custom clone function in JavaScript","tags":["javascript","clone","bun","node"]},"unlisted":false,"nextItem":{"title":"DDC/CI","permalink":"/til/2025/02/05/ddc-ci"}}')}}]);